<div class="companies-page">
    <!-- En-tête de page -->
    <div class="card mb-5">
        <div class="flex flex-col lg:flex-row lg:justify-between lg:align-middle">
            <div class="mb-3 lg:mb-0">
                <div class="flex align-items-center mb-2">
                    <i class="pi pi-building text-blue-600 text-2xl mr-3"></i>
                    <h1 class="text-2xl font-semibold text-blue-900 m-0">Gestion des Sociétés</h1>
                </div>
                <p class="text-600 m-0 line-height-3">
                    Suivi et gestion des Sociétés et leurs informations
                </p>
            </div>

            <!-- Actions principales -->
            <div class="flex flex-column sm:flex-row gap-2">
                <p-button
                    icon="pi pi-plus"
                    label="Nouvelle société"
                    (click)="onCreate()"
                    class="p-button-primary">
                </p-button>
            </div>
        </div>
    </div>

    <!-- Liste des companies -->
    <app-company-list
        (companyEvent)="onCompanyEvent($event)"
    ></app-company-list>

    <!-- Dialog pour le formulaire -->
    <p-dialog
        [(visible)]="showFormDialog"
        [modal]="true"
        [draggable]="false"
        [resizable]="false"
        [closable]="true"
        [header]="formDialogTitle"
        styleClass="company-dialog"
        [style]="{ width: '90vw', maxWidth: '800px' }"
        (onHide)="onFormDialogHide()"
    >
        <app-company-form
            [company]="selectedCompany"
            [visible]="showFormDialog"
            (formSubmit)="onFormSubmit($event)"
            (formCancel)="onFormCancel()"
        ></app-company-form>
    </p-dialog>

    <!-- Dialog pour les détails -->
    <p-dialog
        [(visible)]="showDetailDialog"
        [modal]="true"
        [draggable]="false"
        [resizable]="false"
        [closable]="true"
        header="Détails de la compagnie"
        styleClass="company-dialog"
        [style]="{ width: '90vw', maxWidth: '700px' }"
        (onHide)="onDetailDialogHide()"
    >
        <app-company-detail
            [company]="selectedCompany"
            (editClick)="onDetailEditClick($event)"
            (closeClick)="onDetailCloseClick()"
        ></app-company-detail>
    </p-dialog>

    <!-- Messages toast -->
    <p-toast key="{{COMPANY_KEY}}"></p-toast>

    <!-- Dialog de confirmation -->
    <p-confirmDialog></p-confirmDialog>
</div>
